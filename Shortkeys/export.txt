[
  {
    "action": "javascript",
    "activeInInputs": true,
    "blacklist": "whitelist",
    "code": "/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n * Javascript snippet to quick nav google search results\n * \n * author: Quan Zhou on 2020-09-04\n * \n * Listens to keystrokes to modify focus and search element results.\n * Up and down to navigate. Press enter to open link\n * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n\nSEARCH_INPUT_ELEMENT = document.querySelector(\"#tsf > div:nth-child(2) > div.A8SBwf > div.RNNXgb > div > div.a4bIc > input\");\nSEARCH_SUBMIT_ELEMENT = document.querySelector(\"#tsf > div:nth-child(2) > div.A8SBwf > div.RNNXgb > button\");\nSEARCH_RESULT_ELEMENTS = document.querySelectorAll(\"h3.LC20lb\");\n\nKEY_CODE_ENTER = 13;\nKEY_CODE_DOWN = 40;\nKEY_CODE_UP = 38;\n\ndocument.selectedResultId = 0;           // -1 is the search bar\n\n// Modify the page on keystroke\ndocument.onkeyup=function(event) {\n    results_count = SEARCH_RESULT_ELEMENTS.length;\n\n    if (event.keyCode==KEY_CODE_UP && document.selectedResultId > -1) {\n      document.selectedResultId -= 1;\n      selectResult()\n    }\n    if (event.keyCode==KEY_CODE_DOWN && document.selectedResultId < results_count - 1) {\n      document.selectedResultId += 1;\n      selectResult();\n    }\n    if (event.keyCode==KEY_CODE_ENTER){\n        doAction();\n    }\n}\n\n// If search bar is clicked, reset the focus element\ndocument.onclick =function(event) {\n    search_form = event.path.find(x => x.id == 'searchform');\n    if (search_form) {\n        SEARCH_INPUT_ELEMENT.focus();\n    }\n}\n\nfunction selectResult(){\n    console.log(document.selectedResultId)\n    // Focus search bar and move cursor to the end\n    if (document.selectedResultId == -1) {\n        SEARCH_INPUT_ELEMENT.focus();\n        SEARCH_INPUT_ELEMENT.selectionStart = SEARCH_INPUT_ELEMENT.selectionEnd = SEARCH_INPUT_ELEMENT.value.length;\n        return;\n    }\n\n    // Select link\n    element = SEARCH_RESULT_ELEMENTS[document.selectedResultId];\n    modify_and_focus_link(element);\n}\n\nfunction doAction() {\n    // Nav search bar\n    if (document.selectedResultId == -1) {\n        SEARCH_SUBMIT_ELEMENT.click();\n        return;\n    }\n\n    // Open link\n    var el = SEARCH_RESULT_ELEMENTS[document.selectedResultId];\n    var lnk = el.parentElement;\n    var url = lnk.href;\n    if(event.ctrlKey){\n      var win = window.open(url,\"_blank\");\n      win.blur();\n      window.open().close();\n    }\n    else{\n        document.location = url;\n    }\n}\n\nfunction modify_and_focus_link(element) {\n    // remove results pointer\n    results_pointer = document.getElementById(\"result-pointer\");\n    if(results_pointer != null){\n        results_pointer.remove();\n    }\n\n    // add back results pointer\n    lnk = element.parentElement;\n    element.innerHTML = \"<div id=\\\"result-pointer\\\" style=\\\"position:absolute;left:-15px;\\\">&gt;</div>\"  + element.innerHTML;\n    lnk.focus()\n}\n\nselectResult();",
    "customName": "Google Search Navigation",
    "exported": true,
    "key": "tab",
    "open": false,
    "sites": "*google.com*",
    "sitesArray": [
      "*google.com*"
    ]
  },
  {
    "action": "javascript",
    "blacklist": "whitelist",
    "code": "document.selectedResultId=0\nfunction selectResult(newId){\n    els = document.querySelectorAll(\"div.phui-oi-table-row\")\n    if(newId < 0 || newId >= els.length)\n        return  //Could modify for page nav...?\n    rp = document.getElementById(\"quan-tab-nav-selected\")\n    if(rp != null){\n        el.style = \"unset\"\n    }\n    document.selectedResultId=newId\n    el = els[newId]\n    lnk = el.querySelector('a')\n    el.style = \"background-color:rgba(77, 0, 102, 0.3)\"\n    el.id = \"quan-tab-nav-selected\"\n    lnk.focus()\n}\ndocument.onkeyup=function(event){\n    if(event.keyCode==38)\n        selectResult(document.selectedResultId-1)\n    if(event.keyCode==40)\n        selectResult(document.selectedResultId+1)\n    if(event.keyCode==13){\n      var el = document.querySelectorAll(\"div.phui-oi-table-row\")[document.selectedResultId]\n      var lnk = el.querySelector('a')\n      var url = lnk.href\n      if(event.ctrlKey){\n        var win = window.open(url,\"_blank\")\n        win.blur()\n        window.open().close()\n      }\n      else{\n        document.location = url\n      }\n    }\n}\nselectResult(0)",
    "customName": "Phabricator Review Navigation",
    "exported": true,
    "key": "tab",
    "open": false,
    "sites": "*phabricator.team.affirm.com/*",
    "sitesArray": [
      "*phabricator.team.affirm.com/*"
    ]
  },
  {
    "action": "javascript",
    "blacklist": "whitelist",
    "code": "function focus_on_search() {\n  elements = document.getElementsBySelector('#buildHistory > div.row.pane-content > table > tbody > tr.build-search-row > td > table > tbody > tr > td > input')\n  element = elements[0]\n  element.focus()\n}\n\nfocus_on_search()\n",
    "customName": "Jenkins Search Focus",
    "exported": true,
    "key": "/",
    "open": false,
    "sites": "*jenkins*.com*",
    "sitesArray": [
      "*jenkins*.com*"
    ]
  },
  {
    "action": "javascript",
    "activeInInputs": true,
    "blacklist": "whitelist",
    "code": "document.selectedResultId=0\nfunction selectResult(newId){\n    els = document.querySelectorAll(\"#buildHistory > div.row.pane-content > table > tr > td.build-row-cell\")\n    if(newId < 0 || newId >= els.length)\n        return  //Could modify for page nav...?\n    rp = document.getElementById(\"quan-tab-nav-selected\")\n    if(rp != null){\n        el.style = \"unset\"\n    }\n    document.selectedResultId=newId\n    el = els[newId]\n    lnk = el.querySelector('a')\n    el.style = \"background-color:rgba(77, 0, 102, 0.3)\"\n    el.id = \"quan-tab-nav-selected\"\n    lnk.focus()\n}\ndocument.onkeyup=function(event){\n    if(event.keyCode==38)\n        selectResult(document.selectedResultId-1)\n    if(event.keyCode==40)\n        selectResult(document.selectedResultId+1)\n    if(event.keyCode==13){\n      var el = document.querySelectorAll(\"#buildHistory > div.row.pane-content > table > tr > td.build-row-cell\")[document.selectedResultId]\n      var lnk = el.querySelector('a')\n      var url = lnk.href\n      if(event.ctrlKey){\n        var win = window.open(url,\"_blank\")\n        win.blur()\n        window.open().close()\n      }\n      else{\n        document.location = url\n      }\n    }\n}\nselectResult(0)",
    "customName": "Jenkins Build Navigation",
    "exported": true,
    "key": "tab",
    "open": false,
    "sites": "*jenkins*.com*",
    "sitesArray": [
      "*jenkins*.com*"
    ]
  },
  {
    "action": "javascript",
    "activeInInputs": true,
    "blacklist": "whitelist",
    "code": "document.selectedResultId=0\nfunction selectResult(newId){\n    els = document.querySelectorAll(\"a.search-result-link\")\n    if(newId < 0 || newId >= els.length)\n        return  //Could modify for page nav...?\n    rp = document.getElementById(\"result-pointer\")\n    if(rp != null){\n        rp.remove()\n    }\n    document.selectedResultId=newId\n    el = els[newId]\n    el.innerHTML = \"<div id=\\\"result-pointer\\\" style=\\\"position:absolute;left:-15px;\\\">&gt;</div>\" + el.innerHTML\n    el.focus()\n}\ndocument.onkeyup=function(event){\n    if(event.keyCode==38)\n        selectResult(document.selectedResultId-1)\n    if(event.keyCode==40)\n        selectResult(document.selectedResultId+1)\n    if(event.keyCode==13){\n      var el = document.querySelectorAll(\"a.search-result-link\")[document.selectedResultId]\n      var lnk = el\n      var url = lnk.href\n      if(event.ctrlKey){\n        var win = window.open(url,\"_blank\")\n        win.blur()\n        window.open().close()\n      }\n      else{\n        document.location = url\n      }\n    }\n}\nselectResult(0)\n",
    "customName": "Confluence Search Navigation",
    "exported": true,
    "key": "tab",
    "open": false,
    "sites": "*confluence.team.affirm.com/*",
    "sitesArray": [
      "*confluence.team.affirm.com/*"
    ]
  },
  {
    "action": "javascript",
    "blacklist": false,
    "code": "/* * * * * * * * * * * * * * * * * * * * * * * * *  \n * Prompts and modifies playback speed of first\n * video element found\n * \n * Author: Quan Zhou on 2020-09-04\n * * * * * * * * * * * * * * * * * * * * * * * * */\n\nspeed = window.prompt('Enter playback speed')\n\nif (speed) {\n    video = document.getElementsByTagName('video')[0]\n    video.playbackRate = speed\n}",
    "exported": true,
    "key": "command+option+j",
    "open": false,
    "sites": "*mail.google.com*",
    "sitesArray": [
      "*mail.google.com*"
    ]
  }
]
